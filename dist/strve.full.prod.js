/*!
 * Strve.js v6.7.0
 * (c) 2021-2024 maomincoding
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Strve={})}(this,(function(e){"use strict";const t=(e,n,o,r)=>{let i;n[0]=0;for(let s=1;s<n.length;s++){const l=n[s++],c=n[s]?(n[0]|=l?1:2,o[n[s++]]):n[++s];3===l?r[0]=c:4===l?r[1]=Object.assign(r[1]||{},c):5===l?(r[1]=r[1]||{})[n[++s]]=c:6===l?r[1][n[++s]]+=c+"":l?(i=e.apply(c,t(e,c,o,["",null])),r.push(i),c[0]?n[0]|=2:(n[s-2]=0,n[s]=i)):r.push(c)}return r},n=new Map,o=function(e){let o=n.get(this);return o||(o=new Map,n.set(this,o)),o=t(this,o.get(e)||(o.set(e,o=function(e){let t,n,o=1,r="",i="",s=[0];const l=e=>{1===o&&(e||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(0,e,r):3===o&&(e||r)?(s.push(3,e,r),o=2):2===o&&"..."===r&&e?s.push(4,e,0):2===o&&r&&!e?s.push(5,0,!0,r):o>=5&&((r||!e&&5===o)&&(s.push(o,0,r,n),o=6),e&&(s.push(o,e,0,n),o=6)),r=""};for(let c=0;c<e.length;c++){c&&(1===o&&l(),l(c));for(let a=0;a<e[c].length;a++)t=e[c][a],1===o?"<"===t?(l(),s=[s],o=3):r+=t:4===o?"--"===r&&">"===t?(o=1,r=""):r=t+r[0]:i?t===i?i="":r+=t:'"'===t||"'"===t?i=t:">"===t?(l(),o=1):o&&("="===t?(o=5,n=r,r=""):"/"===t&&(o<5||">"===e[c][a+1])?(l(),3===o&&(s=s[0]),o=s,(s=s[0]).push(2,0,o),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(l(),o=2):r+=t),3===o&&"!--"===r&&(o=4,s=s[0])}return l(),s}(e)),o),arguments,[]),o.length>1?o:o[0]}.bind((function(e,t,n){let o=null,r=null,i=null;for(r in t)"key"===r&&(o=t[r]);return arguments.length>2&&(i=arguments.length>3?Array.prototype.slice.call(arguments,2):n),{tag:e,props:t,children:i,key:o,el:null}}));function r(e){const t=Object.create(null),n=e.split(",");for(let e=0;e<n.length;e++)t[n[e]]=!0;return function(e){return t[e]}}const i=r("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot"),s=r("svg,animate,circle,clippath,cursor,image,defs,desc,ellipse,filter,font-faceforeignobject,g,glyph,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feFlood,feGaussianBlur,feImage,feMerge,feMorphology,feOffset,feSpecularLighting,feTile,feTurbulence,feDistantLight,fePointLight,feSpotLight,linearGradient,stop,radialGradient,animateTransform,animateMotion"),l=r("click,dbclick,mousedown,mouseup,mousemove,mouseover,mouseout,contextmenukeydown,keyup,keypress,submit,reset,change,focus,blur,input,load,unload,resize,scrollblur,dragstart,drag,dragenter,dragleave,dragover,drop,dragend,touchstart,touchmove,touchend,touchcancelanimationstart,animationend,animationiteration,transitionend");function c(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)}const a={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},u="http://www.w3.org/1999/xlink";function f(e){return Object.prototype.toString.call(e).match(/\[object (.+?)\]/)[1].toLowerCase()}const d=["object","array","function","regexp","date","math"];function p(e){return d.includes(f(e))}function h(e){return null==e}function g(e,t){return e.tag===t.tag&&e.key===t.key}function m(e,t){return e.hasOwnProperty(t)}function y(e){if(e)return m(e,"tag")&&m(e,"props")&&m(e,"children")&&m(e,"key")&&m(e,"el")}function b(e){return Array.isArray(e)?function(e){return e.every(y)}(e):y(e)}function w(e){console.warn(`[Strve warn]: ${e}`)}function v(e,t){Object.assign(e.style,t)}function k(e,t,n){const o=t.slice(2).toLowerCase();l(o)&&"function"==typeof n&&e.addEventListener(o,n)}function j(e,t,n){const o=t.slice(2).toLowerCase();l(o)&&"function"==typeof n&&e.removeEventListener(o,n)}function S(e,t,n){if(c(t)){const o="http://www.w3.org/1999/xlink";e.setAttributeNS(o,t,n.toString())}else e.setAttribute(t,n.toString())}function M(e,t){var n;c(t)?e.removeAttributeNS(u,c(n=t)?n.slice(6,n.length):""):e.removeAttribute(t)}function O(e){switch(!0){case i(e):return document.createElement(e);case s(e):return t=function(e){return s(e)?"svg":"math"===e?"math":void 0}(e),n=e,document.createElementNS(a[t],n);case"fragment"===e||"component"===e:return document.createDocumentFragment();case"comment"===e||"null"===e:return document.createComment(e);default:return document.createElement(e)}var t,n}const x=["$ref","$is"];let C=new WeakMap;const A=Object.create(null);function L(e,t){let n="";if(Array.isArray(e))if(e.length>1){let t=[];for(let n=0;n<e.length;n++){const o=e[n];t.push(p(o)?JSON.stringify(o):o)}n=t.join("")}else n=0===e.length?"":JSON.stringify(e).replace(/,/g,"");else n=p(e)?JSON.stringify(e):e;t.textContent=n}function E(e,t,n){const{tag:o,props:r,children:i}=e;if(!h(o)){const s=O(o);if(e.el=s,!h(r)){const e=Object.keys(r);for(let t=0;t<e.length;t++){const n=e[t],o=r[n],i=f(o);if(n.startsWith("on")&&k(s,n,o),"function"===i||"key"===n||x.includes(n)||S(s,n,o),"style"===n&&"object"===i&&v(s,o),n===x[0]&&"string"===i&&(A[o]=s),n===x[1]&&"object"===i){const e=o.template();E(e,s),C.set(o,e)}}}if("component"!==o&&!h(i))if(b(i)){const e=f(i);if("array"===e)for(let e=0;e<i.length;e++){const t=i[e];y(t)&&E(t,s)}else"object"===e&&E(i,s)}else s&&L(i,s);if(n)t.insertBefore(s,n);else{if(!t)return s;t.appendChild(s)}}}function T(e,t){if(function(e,t){return"component"!==t.tag&&"component"!==e.tag}(e,t))if(g(e,t)){const n=t.el=e.el,o=e.props||{},r=t.props||{},i=Object.keys(r),s=Object.keys(o);for(let e=0;e<i.length;e++){const t=i[e],s=r[t],l=o[t],c=f(s);s!==l&&(h(s)?M(n,t):("function"===c||"key"===t||x.includes(t)||S(n,t,s),"style"===t&&"object"===c&&v(n,s),"function"===c&&s.toString()!==l.toString()&&(j(n,t,l),k(n,t,s))))}for(let e=0;e<s.length;e++){const t=s[e];i.includes(t)||M(n,t)}const l=e.children,c=t.children;"array"===f(l)&&"array"===f(c)?function(e,t,n){const o=t.length;let r=0,i=e.length-1,s=o-1;for(;r<=i&&r<=s&&g(e[r],t[r]);)T(e[r],t[r]),r++;for(;r<=i&&r<=s&&g(e[i],t[s]);)T(e[i],t[s]),i--,s--;if(r>i){if(r<=s){const e=s+1,i=e<o?t[e].el:null;for(;r<=s;)n.insertBefore(E(t[r]),i),r++}}else if(r>s)for(;r<=i;)n.removeChild(e[r].el),r++;else{const l=r,c=r,a=new Map;for(r=c;r<=s;r++){const e=t[r];null!=e.key&&a.set(e.key,r)}let u,f=0;const d=s-c+1;let p=!1,h=0;const m=new Array(d);for(r=0;r<d;r++)m[r]=0;for(let o=l;o<=i;o++){if(f>=d){n.removeChild(e[o].el);continue}let r;if(null!==e[o].key)r=a.get(e[o].key);else for(u=c;u<=s;u++)if(0===m[u-c]&&g(e[o],t[u])){r=u;break}void 0===r?n.removeChild(e[o].el):(m[r-c]=o+1,r>h?h=r:p=!0,T(e[o],t[r]),f++)}const y=p?function(e){const t=e.slice(),n=[0];let o,r,i,s,l;const c=e.length;for(o=0;o<c;o++){const c=e[o];if(0!==c){if(r=n[n.length-1],e[r]<c){t[o]=r,n.push(o);continue}for(i=0,s=n.length-1;i<s;)l=(i+s)/2|0,e[n[l]]<c?i=l+1:s=l;c<e[n[i]]&&(i>0&&(t[o]=n[i-1]),n[i]=o)}}for(i=n.length,s=n[i-1];i-- >0;)n[i]=s,s=t[s];return n}(m):[];u=y.length-1;for(let e=d-1;e>=0;e--){const r=e+c,i=r+1<o?t[r+1].el:null;0===m[e]?n.insertBefore(E(t[r]),i):p&&(u<0||e!==y[u]?n.insertBefore(t[r].el,i):u--)}}}(l,c,n):y(l)&&y(c)?T(l,c):b(l)||b(c)||l===c||L(c,n)}else{const n=e.el.parentNode,o=e.el.nextSibling;n.removeChild(e.el),E(t,n,o)}}async function N(e,t){if("function"==typeof e&&"undefined"!=typeof Promise)try{await Promise.resolve(e());const n=t||this,o=n.template();T(C.get(n),o),C.set(n,o)}catch(e){w(e)}}let B=Object.create(null);e.defineComponent=function(e,t){"function"==typeof e&&(t=e,e=Object.create(null));class n{template;static instance;constructor(){const n={content:this,setData:N.bind(this)},o=t.call(this,n);this.template=o;const r=o();if(e.mount){const t=function(e){if("string"==typeof e){const t=document.querySelector(e);if(!t){let t=null;return e.startsWith("#")?(t=document.createElement("div"),t.setAttribute("id",e.substring(1,e.length))):e.startsWith(".")?(t=document.createElement("div"),t.setAttribute("class",e.substring(1,e.length))):w(`Failed to mount app: mount target selector "${e}" returned null.`),document.body.insertAdjacentElement("afterbegin",t),t}return t}return e instanceof HTMLElement?e:window.ShadowRoot&&e instanceof window.ShadowRoot&&"closed"===e.mode?(w('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs.'),null):null}(e.mount);E(r,t),C.set(this,r),B=t}}static getInstance(){return this.instance||(this.instance=new n),this.instance}}return n.getInstance()},e.domInfo=A,e.html=o,e.resetView=function(e){B.innerHTML="",C=null,C=new WeakMap;const t=e.template();E(t,B),C.set(e,t)},e.setData=N,e.version="6.7.0",Object.defineProperty(e,"__esModule",{value:!0})}));
